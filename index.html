<!doctype html>
<html lang="es">
<head>
  <!-- Codificación estándar -->
  <meta charset="utf-8">

  <!-- Viewport para móviles; evita zoom manual (UX tipo app). 'viewport-fit=cover' permite usar area segura en iOS. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">

  <!-- Color del UI del navegador (Chrome/Android, Windows, etc.) -->
  <meta name="theme-color" content="#007bff">

  <!-- Título de la app -->
  <title>Todo Terreno PRO — Bootstrap 4 + jQuery</title>

  <!-- Manifest PWA: nombre, íconos, scope y comportamiento de instalación -->
  <link rel="manifest" href="./manifest.webmanifest">

  <!-- Favicon/ícono base (también útil para splash en algunas plataformas) -->
  <link rel="icon" href="./assets/icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="./assets/icons/icon-192.png">

  <!-- CSS de Bootstrap 4.6 (solo estilos, bundle JS va al final) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

  <!-- Estilos propios de la app (versionados por querystring) -->
  <link href="./css/app.css?v=v5.6.0-r6" rel="stylesheet">

  <!-- Evita cachear este HTML (útil durante desarrollo/QA) -->
  <meta http-equiv="Cache-Control" content="no-store, max-age=0, must-revalidate">

  <!-- Utilidad mínima para íconos inline en los botones del header -->
  <style>
    .icon-img { width: 20px; height: 20px; vertical-align: -3px; }
  </style>
</head>

<body class="app-body">
  <!--
    HEADER FIJO (fixed-top)
    - Incluye logo/título a la izquierda y acciones rápidas a la derecha.
    - Botones: Ajustes (engranaje) y Cerrar sesión (salir).
  -->
  <header class="app-header navbar navbar-light bg-white border-bottom fixed-top">
    <div class="container-fluid align-items-center d-flex justify-content-between">
      <div class="d-flex align-items-center">
        <!-- Logotipo redondeado -->
        <img src="./assets/icons/icon-192.png" class="rounded" width="28" height="28" alt="">
        <strong class="ml-2">Todo Terreno PRO</strong>
      </div>

      <!-- Acciones de usuario en la barra superior -->
      <div class="d-flex align-items-center">
        <!-- Botón: Ajustes (navega a #/settings por JS en main.js) -->
        <button class="btn btn-link text-decoration-none" id="btn-settings" title="Ajustes">
          <img class="icon-img" alt="Ajustes" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBQcm8gNi43LjIgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTIyMy4zIDM3LjhjLjQtMS41IDEuMy0yLjggMi40LTMuOGM5LjktMS4zIDIwLTIgMzAuMy0yczIwLjQgLjcgMzAuMyAyYzEuMSAxIDEuOSAyLjMgMi40IDMuOGwxMy43IDQ3LjdjMy41IDEyLjEgMTIuMiAyMS4xIDIyLjUgMjYuMWM3LjYgMy42IDE0LjggNy44IDIxLjcgMTIuNWM5LjQgNi41IDIxLjcgOS41IDMzLjkgNi41bDQ4LjItMTJjMS41LS40IDMtLjMgNC40IC4yYzUuNCA2LjkgMTAuNCAxNC4yIDE0LjkgMjEuOGw0LjMgNy40YzQuMiA3LjUgNy45IDE1LjMgMTEuMiAyMy4zYy0uMyAxLjUtMSAyLjktMi4xIDRMNDI2LjggMjExYy04LjcgOS0xMi4yIDIxLjEtMTEuMyAzMi41Yy4zIDQuMSAuNSA4LjMgLjUgMTIuNXMtLjIgOC40LS41IDEyLjVjLS45IDExLjQgMi42IDIzLjUgMTEuMyAzMi41bDM0LjUgMzUuN2MxLjEgMS4xIDEuOCAyLjUgMi4xIDRjLTMuMyA4LTcgMTUuOC0xMS4yIDIzLjRsLTQuMiA3LjNjLTQuNiA3LjYtOS42IDE0LjgtMTQuOSAyMS44Yy0xLjQgLjUtMi45IC41LTQuNCAuMmwtNDguMi0xMmMtMTIuMi0zLTI0LjQgMC0zMy45IDYuNWMtNi45IDQuNy0xNC4xIDguOS0yMS43IDEyLjVjLTEwLjMgNC45LTE5LjEgMTQtMjIuNSAyNi4xbC0xMy43IDQ3LjdjLS40IDEuNS0xLjMgMi44LTIuNCAzLjhjLTkuOSAxLjMtMjAgMi0zMC4zIDJzLTIwLjQtLjctMzAuMy0yYy0xLjEtMS0xLjktMi4zLTIuNC0zLjhsLTEzLjctNDcuN2MtMy41LTEyLjEtMTIuMi0yMS4xLTIyLjUtMjYuMWMtNy42LTMuNi0xNC44LTcuOC0yMS43LTEyLjVjLTkuNC02LjUtMjEuNy05LjUtMzMuOS02LjVsLTQ4LjIgMTJjLTEuNSAuNC0zIC4zLTQuNC0uMmMtNS40LTctMTAuNC0xNC4yLTE1LTIxLjhsLTQuMi03LjNjLTQuMi03LjUtNy45LTE1LjMtMTEuMi0yMy40Yy4zLTEuNSAxLTIuOSAyLjEtNEw4NS4yIDMwMWM4LjctOSAxMi4yLTIxLjEgMTEuMy0zMi41Yy0uMy00LjEtLjUtOC4zLS41LTEyLjVzLjItOC40IC41LTEyLjVjLjktMTEuNC0yLjYtMjMuNS0xMS4zLTMyLjVMNTAuNyAxNzUuMmMtMS4xLTEuMS0xLjgtMi41LTIuMS00YzMuMy04IDctMTUuOCAxMS4yLTIzLjRsNC4yLTcuM2M0LjYtNy42IDkuNi0xNC44IDE1LTIxLjhjMS40LS41IDIuOS0uNSA0LjQtLjJsNDguMiAxMmMxMi4yIDMgMjQuNCAwIDMzLjktNi41YzYuOS00LjcgMTQuMS04LjkgMjEuNy0xMi41YzEwLjMtNC45IDE5LjEtMTQgMjIuNS0yNi4xbDEzLjctNDcuN3pNMjU2IDBjLTEzIDAtMjUuOSAxLTM4LjQgMi45Yy0xLjcgLjMtMy40IC44LTUgMS42Yy05LjUgNC45LTE2LjkgMTMuNi0yMCAyNC41TDE3OC45IDc2LjdjLS42IDIuMi0yLjUgNC41LTUuNiA2Yy05LjEgNC4zLTE3LjggOS40LTI2IDE1Yy0yLjggMS45LTUuOCAyLjQtOCAxLjhsLTQ4LjItMTJDODAuMiA4NC44IDY5IDg2LjkgNjAgOTIuNmMtMS41IC45LTIuOCAyLjEtMy45IDMuNUM0OSAxMDUgNDIuNCAxMTQuMyAzNi41IDEyNC4xbC0uMSAuM0wzMiAxMzJsLS4xIC4zYy01LjQgOS44LTEwLjIgMTkuOS0xNC4zIDMwLjRjLS42IDEuNi0xIDMuMy0xLjEgNWMtLjUgMTAuOCAzLjMgMjEuNiAxMS4yIDI5LjhsMzQuNSAzNS43YzEuNiAxLjcgMi43IDQuNCAyLjQgNy44Yy0uNCA1LS42IDEwLS42IDE1cy4yIDEwLjEgLjYgMTVjLjMgMy40LS44IDYuMi0yLjQgNy44TDI3LjcgMzE0LjZjLTcuOSA4LjItMTEuNyAxOS0xMS4yIDI5LjhjLjEgMS43IC41IDMuNCAxLjEgNWM0LjEgMTAuNSA4LjkgMjAuNiAxNC4zIDMwLjRsLjEgLjMgNC40IDcuNiAuMSAuM2M1LjkgOS44IDEyLjQgMTkuMiAxOS42IDI4LjFjMS4xIDEuNCAyLjQgMi42IDMuOSAzLjVjOSA1LjcgMjAuMiA3LjggMzEuMSA1LjFsNDguMi0xMmMyLjItLjYgNS4yLS4xIDggMS44YzguMiA1LjcgMTYuOSAxMC43IDI2IDE1YzMuMSAxLjUgNC45IDMuOCA1LjYgNkwxOTIuNiA0ODNjMy4xIDEwLjggMTAuNSAxOS41IDIwIDI0LjVjMS42IC44IDMuMiAxLjQgNSAxLjZDMjMwLjEgNTExIDI0MyA1MTIgMjU2IDUxMnMyNS45LTEgMzguNC0yLjljMS43LS4zIDMuNC0uOCA1LTEuNmM5LjUtNC45IDE2LjktMTMuNiAyMC0yNC41bDEzLjctNDcuN2MuNi0yLjIgMi41LTQuNSA1LjYtNmM5LjEtNC4zIDE3LjgtOS40IDI2LTE1YzIuOC0xLjkgNS44LTIuNCA4LTEuOGw0OC4yIDEyYzEwLjkgMi43IDIyLjEgLjcgMzEuMS01LjFjMS41LS45IDIuOC0yLjEgMy45LTMuNWM3LjEtOC45IDEzLjYtMTguMiAxOS41LTI4bC4yLS4zTDQ4MCAzODBsLjEtLjNjNS40LTkuNyAxMC4yLTE5LjkgMTQuMy0zMC40Yy42LTEuNiAxLTMuMyAxLjEtNWMuNS0xMC44LTMuMy0yMS42LTExLjItMjkuOGwtMzQuNS0zNS43Yy0xLjYtMS43LTIuNy00LjQtMi40LTcuOGMuNC01IC42LTEwIC42LTE1cy0uMi0xMC4xLS42LTE1Yy0uMy0zLjQgLjgtNi4yIDIuNC03LjhsMzQuNS0zNS43YzcuOS04LjIgMTEuNy0xOSAxMS4yLTI5LjhjLS4xLTEuNy0uNS0zLjQtMS4xLTVjLTQuMS0xMC41LTguOS0yMC42LTE0LjMtMzAuNGwtLjEtLjMtNC40LTcuNi0uMi0uM2MtNS45LTkuOC0xMi40LTE5LjItMTkuNS0yOGMtMS4xLTEuNC0yLjQtMi42LTMuOS0zLjVjLTktNS43LTIwLjItNy44LTMxLjEtNS4xbC00OC4yIDEyYy0yLjIgLjYtNS4yIC4xLTgtMS44Yy04LjItNS43LTE2LjktMTAuNy0yNi0xNWMtMy4xLTEuNS00LjktMy44LTUuNi02TDMxOS40IDI5Yy0zLjEtMTAuOC0xMC41LTE5LjUtMjAtMjQuNWMtMS42LS44LTMuMi0xLjQtNS0xLjZDMjgxLjkgMSAyNjkgMCAyNTYgMHpNMjAwIDI1NmE1NiA1NiAwIDEgMSAxMTIgMCA1NiA1NiAwIDEgMSAtMTEyIDB6bTE0NCAwYTg4IDg4IDAgMSAwIC0xNzYgMCA4OCA4OCAwIDEgMCAxNzYgMHoiLz48L3N2Zz4=">
        </button>        <!-- Botón: Sesión (muestra login o logout según estado) -->
        <button class="btn btn-link text-decoration-none" id="btn-auth" title="Iniciar sesión">
          <img class="icon-img" id="icon-auth" alt="Sesión" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBQcm8gNi43LjIgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTMxOS4yIDI1Ny44Yy41LS41IC44LTEuMSAuOC0xLjhzLS4zLTEuNC0uOC0xLjhMMTg3LjMgMTI5LjhjLTEuMi0xLjItMi45LTEuOC00LjYtMS44Yy0zLjcgMC02LjcgMy02LjcgNi43bDAgNTcuM2MwIDguOC03LjIgMTYtMTYgMTZMNDAgMjA4Yy00LjQgMC04IDMuNi04IDhsMCA4MGMwIDQuNCAzLjYgOCA4IDhsMTIwIDBjOC44IDAgMTYgNy4yIDE2IDE2bDAgNTcuM2MwIDMuNyAzIDYuNyA2LjcgNi43YzEuNyAwIDMuMy0uNiA0LjYtMS44TDMxOS4yIDI1Ny44ek0zNTIgMjU2YzAgOS41LTMuOSAxOC42LTEwLjggMjUuMUwyMDkuMiA0MDUuNWMtNy4yIDYuOC0xNi43IDEwLjUtMjYuNSAxMC41Yy0yMS40IDAtMzguNy0xNy4zLTM4LjctMzguN2wwLTQxLjNMNDAgMzM2Yy0yMi4xIDAtNDAtMTcuOS00MC00MGwwLTgwYzAtMjIuMSAxNy45LTQwIDQwLTQwbDEwNCAwIDAtNDEuM2MwLTIxLjQgMTcuMy0zOC43IDM4LjctMzguN2M5LjkgMCAxOS4zIDMuOCAyNi41IDEwLjVMMzQxLjIgMjMwLjljNi45IDYuNSAxMC44IDE1LjYgMTAuOCAyNS4xek0zMzYgNDQ4bDk2IDBjMjYuNSAwIDQ4LTIxLjUgNDgtNDhsMC0yODhjMC0yNi41LTIxLjUtNDgtNDgtNDhsLTk2IDBjLTguOCAwLTE2LTcuMi0xNi0xNnM3LjItMTYgMTYtMTZsOTYgMGM0NC4yIDAgODAgMzUuOCA4MCA4MGwwIDI4OGMwIDQ0LjItMzUuOCA4MC04MCA4MGwtOTYgMGMtOC44IDAtMTYtNy4yLTE2LTE2czcuMi0xNiAxNi0xNnoiLz48L3N2Zz4=">
        </button>
      </div>
    </div>
  </header>

  <!--
    BREADCRUMBS (sticky-top)
    - Muestra la ruta de navegación; el contenido se inyecta desde main.js en #breadcrumbs
    - Se posiciona justo debajo del header fijo
  -->
  <nav class="app-bc border-bottom bg-white sticky-top">
    <div class="container-fluid">
      <ol class="breadcrumb mb-0 py-2 px-0" id="breadcrumbs"></ol>
    </div>
  </nav>

  <!--
    MAIN (contenedor donde cada vista renderiza su HTML)
    - #app-main es gestionado por el router hash (main.js)
    - tabindex="-1" permite manejar focus programático para accesibilidad
  -->
  <main class="app-main container-fluid" id="app-main" role="main" tabindex="-1"></main>

  <!--
    FOOTER FIJO (fixed-bottom)
    - Chips informativos: estado de conexión, pendientes, sincronizados
    - Botón "Sincronizar" para forzar tryProcessQueue()
  -->
  <footer class="app-footer fixed-bottom border-top bg-white">
    <div class="container-fluid py-2">
      <div class="d-flex align-items-center flex-wrap w-100">
        <span class="badge badge-pill badge-success" id="chip-online">Online</span>
        <a href="#/pending" class="ml-2 text-decoration-none"><span class="badge badge-pill badge-warning" id="chip-pending">Pend: 0</span></a>
        <a href="#/synced" class="ml-2 text-decoration-none"><span class="badge badge-pill badge-primary" id="chip-synced">Sync: 0</span></a>
        <button class="btn btn-sm btn-primary ml-auto" id="btn-sync-footer">Sincronizar</button>
      </div>
    </div>
  </footer>

  <!-- Dependencias JS (CDN oficiales) -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- Código de la app (versionado por querystring) -->
  <script src="./js/main.js?v=v5.6.0-r5"></script>

  <!-- Registro de Service Worker
       - Se hace en 'load' para no bloquear el first paint
       - scope './' asegura que controle todas las rutas relativas del sitio
       - catch silencioso para evitar alertas en navegadores sin soporte -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () =>
        navigator.serviceWorker.register('./sw.js', { scope: './' }).catch(() => {})
      );
    }
  </script>
</body>
</html>
