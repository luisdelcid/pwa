<!doctype html>
<html lang="es">
<head>
  <!-- Codificación estándar -->
  <meta charset="utf-8">

  <!-- Viewport para móviles; evita zoom manual (UX tipo app). 'viewport-fit=cover' permite usar area segura en iOS. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no">

  <!-- Color del UI del navegador (Chrome/Android, Windows, etc.) -->
  <meta name="theme-color" content="#007bff">

  <!-- Título de la app -->
  <title>Todo Terreno PRO — Bootstrap 4 + jQuery</title>

  <!-- Manifest PWA: nombre, íconos, scope y comportamiento de instalación -->
  <link rel="manifest" href="./manifest.webmanifest">

  <!-- Favicon/ícono base (también útil para splash en algunas plataformas) -->
  <link rel="icon" href="./assets/icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="./assets/icons/icon-192.png">

  <!-- CSS de Bootstrap 4.6 (solo estilos, bundle JS va al final) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

  <!-- Estilos propios de la app (versionados por querystring) -->
  <link href="./css/app.css?v=v5.6.0-r6" rel="stylesheet">

  <!-- Evita cachear este HTML (útil durante desarrollo/QA) -->
  <meta http-equiv="Cache-Control" content="no-store, max-age=0, must-revalidate">

  <!-- Utilidad mínima para íconos inline en los botones del header -->
  <style>
    .icon-img { width: 20px; height: 20px; vertical-align: -3px; }
  </style>
</head>

<body class="app-body">
  <!--
    HEADER FIJO (fixed-top)
    - Incluye logo/título a la izquierda y acciones rápidas a la derecha.
    - Botones: Ajustes (engranaje) y Cerrar sesión (salir).
  -->
  <header class="app-header navbar navbar-light bg-white border-bottom fixed-top">
    <div class="container-fluid align-items-center d-flex justify-content-between">
      <div class="d-flex align-items-center">
        <!-- Logotipo redondeado -->
        <img src="./assets/icons/icon-192.png" class="rounded" width="28" height="28" alt="">
        <strong class="ml-2">Todo Terreno PRO</strong>
      </div>

      <!-- Acciones de usuario en la barra superior -->
      <div class="d-flex align-items-center">
        <!-- Botón: Ajustes (navega a #/settings por JS en main.js) -->
        <button class="btn btn-link text-decoration-none" id="btn-settings" title="Ajustes">
          <img class="icon-img" alt="Ajustes" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTc2Ij48IS0tIUZvbnQgQXdlc29tZSBQcm8gNy4wLjAgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTIwOS40IDc5LjFDMjE0LjggNDMuOSAyNDUgMTggMjgwLjYgMThMMjk1LjkgMThDMzMxLjQgMTggMzYxLjcgNDMuOSAzNjcuMSA3OS4xTDM3MiAxMTAuNkMzNzYuMyAxMTIuOCAzODAuNCAxMTUuMyAzODQuNSAxMTcuOEw0MTQuMyAxMDYuMkM0NDcuNCA5My4zIDQ4NSAxMDYuNSA1MDIuOCAxMzcuM0w1MTAuNSAxNTAuNkM1MTcuMSAxNjIuMSA1MjAuMyAxNzQuNyA1MjAuMSAxODcuMkw1MjAuMSAyMjNDNTE5LjkgMjQ0IDUxMC42IDI2NC44IDQ5My4yIDI3OC44TDQ4MS43IDI4OEw0OTMuMiAyOTcuMkM1MTAuOSAzMTEuNCA1MjAuMyAzMzIuNSA1MjAuMSAzNTMuOUw1MjAuMSAzODguOUM1MjAuMiA0MDEuMyA1MTcgNDEzLjkgNTEwLjUgNDI1LjNMNTAyLjggNDM4LjZDNDg1IDQ2OS40IDQ0Ny41IDQ4Mi42IDQxNC4zIDQ2OS43TDM4NC41IDQ1OC4xQzM4MC40IDQ2MC43IDM3Ni4zIDQ2My4xIDM3MiA0NjUuM0wzNjcuMSA0OTYuOEMzNjEuNyA1MzEuOSAzMzEuNSA1NTcuOSAyOTUuOSA1NTcuOUMyODAuNiA1NTcuOSAyNDUuMSA1NTcuOSAyMTQuOCA1MzIgMjA5LjQgNDk2LjhMMjA0LjUgNDY1LjNDMjAwLjIgNDYzLjEgMTk2LjEgNDYwLjYgMTkyIDQ1OC4xTDE2Mi4yIDQ2OS43QzEyOS4xIDQ4Mi42IDkxLjUgNDY5LjQgNzMuNyA0MzguNkw2NiA0MjUuM0M1OS42IDQxNCA1Ni40IDQwMS40IDU2LjUgMzg5TDU2LjUgMzU0QzU2LjMgMzMyLjYgNjUuNyAzMTEuNSA4My40IDI5Ny4zTDk0LjkgMjg4LjFMODMuNCAyNzguOUM2NiAyNjQuOCA1Ni43IDI0NCA1Ni41IDIyM0w1Ni41IDE4Ny4yQzU2LjQgMTc0LjcgNTkuNSAxNjIuMSA2Ni4xIDE1MC42TDczLjggMTM3LjNDOTEuNiAxMDYuNSAxMjkuMSA5My4zIDE2Mi4zIDEwNi4yTDE5MiAxMTcuOEMxOTYuMSAxMTUuMiAyMDAuMiAxMTIuOCAyMDQuNSAxMTAuNkwyMDkuNCA3OS4xek0yODAuNiA1NEMyNjIuOCA1NCAyNDcuNyA2NyAyNDUgODQuNUwyMzguNyAxMjUuM0MyMzcuOCAxMzEuMyAyMzMuOSAxMzYuNCAyMjguNCAxMzguOUMyMjAuMSAxNDIuNyAyMTIuMSAxNDcuMyAyMDQuNyAxNTIuNkMxOTkuOCAxNTYuMSAxOTMuNCAxNTYuOSAxODcuNyAxNTQuN0wxNDkuMiAxMzkuN0MxMzIuNiAxMzMuMyAxMTMuOSAxMzkuOSAxMDUgMTU1LjNMOTcuMyAxNjguNkM4OC40IDE4NCA5Mi4xIDIwMy42IDEwNS45IDIxNC43TDEzOC4xIDI0MC42QzE0Mi44IDI0NC40IDE0NS4zIDI1MC4zIDE0NC44IDI1Ni4zQzE0NCAyNjUuMyAxNDQgMjc0LjcgMTQ0LjggMjgzLjdDMTQ1LjQgMjg5LjcgMTQyLjkgMjk1LjYgMTM4LjEgMjk5LjRMMTA2IDMyNS4zQzkyLjEgMzM2LjQgODguNSAzNTYgOTcuNCAzNzEuNEwxMDUgMzg0LjZDMTEzLjkgNDAwIDEzMi43IDQwNi42IDE0OS4yIDQwMC4yTDE4Ny43IDM4NS4yQzE5My40IDM4MyAxOTkuNyAzODMuOCAyMDQuNyAzODcuM0MyMTIuMSAzOTIuNiAyMjAgMzk3LjIgMjI4LjQgNDAxQzIzMy45IDQwMy41IDIzNy44IDQwOC42IDIzOC43IDQxNC42TDI0NSA0NTUuNEMyNDcuNyA0NzMgMjYyLjggNDg1LjkgMjgwLjYgNDg1LjlMMjk1LjkgNDg1LjlDMzEzLjcgNDg1LjkgMzI4LjggNDcyLjkgMzMxLjUgNDU1LjRMMzM3LjggNDE0LjZDMzM4LjcgNDA4LjYgMzQyLjYgNDAzLjUgMzQ4LjEgNDAxQzM1Ni40IDM5Ny4yIDM2NC40IDM5Mi42IDM3MS44IDM4Ny4zQzM3Ni43IDM4My44IDM4My4xIDM4MyAzODguOCAzODUuMkw0MjcuMyA0MDAuMkM0NDMuOSA0MDYuNiA0NjIuNiA0MDAgNDcxLjUgMzg0LjZMNDc5LjIgMzcxLjNDNDg4LjEgMzU1LjkgNDg0LjQgMzM2LjMgNDcwLjYgMzI1LjJMNDM4LjQgMjk5LjNDNDMzLjcgMjk1LjUgNDMxLjIgMjg5LjYgNDMxLjcgMjgzLjZDNDMyLjUgMjc0LjYgNDMyLjUgMjY1LjIgNDMxLjcgMjU2LjJDNDMxLjEgMjUwLjIgNDMzLjYgMjQ0LjMgNDM4LjQgMjQwLjVMNDcwLjYgMjE0LjZDNDg0LjUgMjAzLjUgNDg4LjEgMTgzLjkgNDc5LjIgMTY4LjVMNDcxLjUgMTU1LjJDNDYyLjYgMTM5LjggNDQzLjggMTMzLjIgNDI3LjMgMTM5LjZMMzg4LjggMTU0LjZDMzgzLjEgMTU2LjggMzc2LjggMTU2IDM3MS44IDE1Mi41QzM2NC40IDE0Ny4yIDM1Ni41IDE0Mi42IDM0OC4xIDEzOC44QzM0Mi42IDEzNi4zIDMzOC43IDEzMS4yIDMzNy44IDEyNS4yTDMzMS41IDg0LjRDMzI4LjggNjcgMzEzLjcgNTQgMjk1LjkgNTRMMjgwLjYgNTR6TTM2MC4zIDI3MEMzNjAuMyAzMDkuOCAzMjguMSAzNDIgMjg4LjMgMzQyQzI0OC41IDM0MiAyMTYuMyAzMDkuOCAyMTYuMyAyNzBDMjE2LjMgMjMwLjIgMjQ4LjUgMTk4IDI4OC4zIDE5OEMzMjguMSAxOTggMzYwLjMgMjMwLjIgMzYwLjMgMjcwek0yNTcgMjg4QzI2My4yIDI5OC44IDI3NC45IDMwNiAyODguMiAzMDZDMzAxLjUgMzA2IDMxMy4yIDI5OC44IDMxOS40IDI4OEMzMTMuMSAyNzcuMiAzMDEuNSAyNzAgMjg4LjIgMjcwQzI3NC45IDI3MCAyNjMuMyAyNzcuMiAyNTcgMjg4eiIvPjwvc3ZnPg==">
        </button>

        <!-- Botón: Cerrar sesión (limpia credenciales por JS en main.js) -->
        <button class="btn btn-link text-decoration-none" id="btn-logout" title="Cerrar sesión">
          <img class="icon-img" alt="Salir" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTc2Ij48IS0tIUZvbnQgQXdlc29tZSBQcm8gNy4wLjAgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzNkMyMTguNCAzNiAxNjIgOTIuNCAxNjIgMTYyTDE2MiAxOThDMTYyIDIyNi41IDE3MS40IDI1Mi43IDE4Ny40IDI3My44QzE2MS42IDI4NiAxNDAuOCAzMDIgMTI0LjYgMzE4LjFDMTA1LjYgMzM3LjEgODcuOCAzNjAuOCA3Ny4yIDM4Ny4yQzczLjcgMzk1LjggNzIgNDA0LjkgNzIgNDE0TDcyIDQ1MEM3MiA0NjQuMiA3Ni4yIDQ3OC4zIDg0LjQgNDkwLjRDOTcuOCA1MTAuMSAxMjAuMSA1MjIgMTQ0IDUyMkw0MzIgNTIyQzQ1NS45IDUyMiA0NzguMiA1MTAuMSA0OTEuNiA0OTAuNEM0OTkuOCA0NzguMyA1MDQgNDY0LjIgNTA0IDQ1MEw1MDQgNDE0QzUwNCA0MDUgNTAyLjMgMzk1LjggNDk4LjggMzg3LjJDNDg4LjIgMzYwLjcgNDcwLjQgMzM3LjEgNDUxLjQgMzE4LjFDNDM1LjMgMzAyIDQxNC41IDI4NiAzODguNiAyNzMuOEM0MDQuNSAyNTIuNyA0MTMuOSAyMjYuNCA0MTMuOSAxOThMNDEzLjkgMTYyQzQxMy45IDkyLjQgMzU3LjUgMzYgMjg3LjkgMzZ6TTI4OCAyODhDMzUzLjIgMjg4IDM5OCAzMTUuNiA0MjYgMzQzLjVDNDQyLjcgMzYwLjIgNDU3LjEgMzc5LjggNDY1LjUgNDAwLjZDNDY5LjkgNDExLjcgNDY4LjYgNDI0LjIgNDYxLjkgNDM0LjFDNDU1LjIgNDQ0IDQ0My45IDQ1MCA0MzIgNDUwTDE0NCA0NTBDMTMyLjEgNDUwIDEyMC45IDQ0NC4xIDExNC4yIDQzNC4yQzEwNy41IDQyNC4zIDEwNi4xIDQxMS43IDExMC42IDQwMC43QzExOC45IDM3OS45IDEzMy40IDM2MC4zIDE1MC4xIDM0My42QzE3OC4xIDMxNS42IDIyMi44IDI4OC4xIDI4OC4xIDI4OC4xek0zNzggMTYyQzM3OCAyMTEuNyAzMzcuNyAyNTIgMjg4IDI1MkMyMzguMyAyNTIgMTk4IDIxMS43IDE5OCAxNjJDMTk4IDExMi4zIDIzOC4zIDcyIDI4OCA3MkMzMzcuNyA3MiAzNzggMTEyLjMgMzc4IDE2MnoiLz48L3N2Zz4=">
        </button>
      </div>
    </div>
  </header>

  <!--
    BREADCRUMBS (sticky-top)
    - Muestra la ruta de navegación; el contenido se inyecta desde main.js en #breadcrumbs
    - Se posiciona justo debajo del header fijo
  -->
  <nav class="app-bc border-bottom bg-white sticky-top">
    <div class="container-fluid">
      <ol class="breadcrumb mb-0 py-2 px-0" id="breadcrumbs"></ol>
    </div>
  </nav>

  <!--
    MAIN (contenedor donde cada vista renderiza su HTML)
    - #app-main es gestionado por el router hash (main.js)
    - tabindex="-1" permite manejar focus programático para accesibilidad
  -->
  <main class="app-main container-fluid" id="app-main" role="main" tabindex="-1"></main>

  <!--
    FOOTER FIJO (fixed-bottom)
    - Chips informativos: estado de conexión, pendientes, sincronizados
    - Botón "Sincronizar" para forzar tryProcessQueue()
  -->
  <footer class="app-footer fixed-bottom border-top bg-white">
    <div class="container-fluid py-2">
      <div class="d-flex align-items-center flex-wrap w-100">
        <span class="badge badge-pill badge-success" id="chip-online">Online</span>
        <a href="#/pending" class="ml-2 text-decoration-none"><span class="badge badge-pill badge-warning" id="chip-pending">Pend: 0</span></a>
        <a href="#/synced" class="ml-2 text-decoration-none"><span class="badge badge-pill badge-primary" id="chip-synced">Sync: 0</span></a>
        <button class="btn btn-sm btn-primary ml-auto" id="btn-sync-footer">Sincronizar</button>
      </div>
    </div>
  </footer>

  <!-- Dependencias JS (CDN oficiales) -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- Código de la app (versionado por querystring) -->
  <script src="./js/main.js?v=v5.6.0-r5"></script>

  <!-- Registro de Service Worker
       - Se hace en 'load' para no bloquear el first paint
       - scope './' asegura que controle todas las rutas relativas del sitio
       - catch silencioso para evitar alertas en navegadores sin soporte -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () =>
        navigator.serviceWorker.register('./sw.js', { scope: './' }).catch(() => {})
      );
    }
  </script>
</body>
</html>
